Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (3.3ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.5ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (4.1ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateAcademicStatuses (20130416135734)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "academic_statuses" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130416135734')[0m
  [1m[35m (4.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (2.7ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (2.9ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (5.0ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateCustomers (1)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.8ms)[0m  CREATE TABLE "customers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "department_id" integer, "academic_status_id" integer, "heard_about_service_id" integer, "last_name" varchar(255), "first_name" varchar(255), "email" varchar(255), "organization" varchar(255), "orders_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_customers_on_last_name" ON "customers" ("last_name")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_customers_on_first_name" ON "customers" ("first_name")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_customers_on_email" ON "customers" ("email")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_customers_on_academic_status_id" ON "customers" ("academic_status_id")
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_customers_on_department_id" ON "customers" ("department_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_customers_on_heard_about_service_id" ON "customers" ("heard_about_service_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('1')[0m
  [1m[35m (5.0ms)[0m  commit transaction
Migrating to CreateOrders (2)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "orders" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "agency_id" integer, "dvd_delivery_location_id" integer, "customer_id" integer DEFAULT 0 NOT NULL, "units_count" integer DEFAULT 0, "invoices_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "date_canceled" datetime, "date_deferred" datetime, "date_due" date, "date_fee_estimate_sent_to_customer" datetime, "date_order_approved" datetime, "date_permissions_given" datetime, "date_started" datetime, "date_request_submitted" datetime, "entered_by" varchar(255), "fee_actual" decimal(7,2), "fee_estimated" decimal(7,2), "is_approved" boolean DEFAULT 0 NOT NULL, "order_status" varchar(255), "order_title" varchar(255), "special_instructions" text, "staff_notes" text, "date_archiving_complete" datetime, "date_customer_notified" datetime, "date_finalization_begun" datetime, "date_patron_deliverables_complete" datetime, "email" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_customer_id" ON "orders" ("customer_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_agency_id" ON "orders" ("agency_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_dvd_delivery_location_id" ON "orders" ("dvd_delivery_location_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_order_status" ON "orders" ("order_status")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_date_request_submitted" ON "orders" ("date_request_submitted")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_orders_on_date_due" ON "orders" ("date_due")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_date_archiving_complete" ON "orders" ("date_archiving_complete")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_date_order_approved" ON "orders" ("date_order_approved")
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (2.9ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateCustomers (1)
Migrating to CreateOrders (2)
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.5ms)[0m  CREATE TABLE "orders" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "agency_id" integer, "dvd_delivery_location_id" integer, "customer_id" integer DEFAULT 0 NOT NULL, "units_count" integer DEFAULT 0, "invoices_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "date_canceled" datetime, "date_deferred" datetime, "date_due" date, "date_fee_estimate_sent_to_customer" datetime, "date_order_approved" datetime, "date_permissions_given" datetime, "date_started" datetime, "date_request_submitted" datetime, "entered_by" varchar(255), "fee_actual" decimal(7,2), "fee_estimated" decimal(7,2), "is_approved" boolean DEFAULT 0 NOT NULL, "order_status" varchar(255), "order_title" varchar(255), "special_instructions" text, "staff_notes" text, "date_archiving_complete" datetime, "date_customer_notified" datetime, "date_finalization_begun" datetime, "date_patron_deliverables_complete" datetime, "email" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_customer_id" ON "orders" ("customer_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_agency_id" ON "orders" ("agency_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_dvd_delivery_location_id" ON "orders" ("dvd_delivery_location_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_order_status" ON "orders" ("order_status")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_date_request_submitted" ON "orders" ("date_request_submitted")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_date_due" ON "orders" ("date_due")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_date_archiving_complete" ON "orders" ("date_archiving_complete")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_date_order_approved" ON "orders" ("date_order_approved")
  [1m[36m (3.7ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (3.0ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateCustomers (1)
Migrating to CreateOrders (2)
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.8ms)[0m  CREATE TABLE "orders" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "agency_id" integer, "dvd_delivery_location_id" integer, "customer_id" integer DEFAULT 0 NOT NULL, "units_count" integer DEFAULT 0, "invoices_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "date_canceled" datetime, "date_deferred" datetime, "date_due" date, "date_fee_estimate_sent_to_customer" datetime, "date_order_approved" datetime, "date_permissions_given" datetime, "date_started" datetime, "date_request_submitted" datetime, "entered_by" varchar(255), "fee_actual" decimal(7,2), "fee_estimated" decimal(7,2), "is_approved" boolean DEFAULT 0 NOT NULL, "order_status" varchar(255), "order_title" varchar(255), "special_instructions" text, "staff_notes" text, "date_archiving_complete" datetime, "date_customer_notified" datetime, "date_finalization_begun" datetime, "date_patron_deliverables_complete" datetime, "email" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_orders_on_customer_id" ON "orders" ("customer_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_agency_id" ON "orders" ("agency_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_dvd_delivery_location_id" ON "orders" ("dvd_delivery_location_id")[0m
  [1m[35m (0.4ms)[0m  CREATE INDEX "index_orders_on_order_status" ON "orders" ("order_status")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_date_request_submitted" ON "orders" ("date_request_submitted")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_date_due" ON "orders" ("date_due")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_date_archiving_complete" ON "orders" ("date_archiving_complete")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_date_order_approved" ON "orders" ("date_order_approved")
  [1m[36m (2.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (2.9ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateCustomers (1)
Migrating to CreateOrders (2)
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "orders" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "agency_id" integer, "dvd_delivery_location_id" integer, "customer_id" integer DEFAULT 0 NOT NULL, "units_count" integer DEFAULT 0, "invoices_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "date_canceled" datetime, "date_deferred" datetime, "date_due" date, "date_fee_estimate_sent_to_customer" datetime, "date_order_approved" datetime, "date_permissions_given" datetime, "date_started" datetime, "date_request_submitted" datetime, "entered_by" varchar(255), "fee_actual" decimal(7,2), "fee_estimated" decimal(7,2), "is_approved" boolean DEFAULT 0 NOT NULL, "order_status" varchar(255), "order_title" varchar(255), "special_instructions" text, "staff_notes" text, "date_archiving_complete" datetime, "date_customer_notified" datetime, "date_finalization_begun" datetime, "date_patron_deliverables_complete" datetime, "email" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_customer_id" ON "orders" ("customer_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_agency_id" ON "orders" ("agency_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_dvd_delivery_location_id" ON "orders" ("dvd_delivery_location_id")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_orders_on_order_status" ON "orders" ("order_status")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_date_request_submitted" ON "orders" ("date_request_submitted")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_date_due" ON "orders" ("date_due")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_date_archiving_complete" ON "orders" ("date_archiving_complete")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_date_order_approved" ON "orders" ("date_order_approved")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('2')[0m
  [1m[35m (3.7ms)[0m  commit transaction
Migrating to CreateUnits (3)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.8ms)[0m  CREATE TABLE "units" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "archive_id" integer, "availability_policy_id" integer, "bibl_id" integer, "heard_about_resource_id" integer, "indexing_scenario_id" integer, "use_right_id" integer, "order_id" integer DEFAULT 0 NOT NULL, "intended_use_id" integer DEFAULT 0 NOT NULL, "master_files_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "date_archived" datetime, "date_materials_received" datetime, "date_materials_returned" datetime, "date_patron_deliverables_ready" datetime, "patron_source_url" text, "remove_watermark" boolean DEFAULT 0 NOT NULL, "special_instructions" text, "staff_notes" text, "unit_extent_estimated" integer, "unit_extent_actual" integer, "unit_status" varchar(255), "date_queued_for_ingest" datetime, "date_dl_deliverables_ready" datetime, "master_file_discoverability" boolean DEFAULT 0 NOT NULL, "exclude_from_dl" boolean DEFAULT 0 NOT NULL, "include_in_dl" boolean DEFAULT 0 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_archive_id" ON "units" ("archive_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_availability_policy_id" ON "units" ("availability_policy_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_bibl_id" ON "units" ("bibl_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_date_archived" ON "units" ("date_archived")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_date_dl_deliverables_ready" ON "units" ("date_dl_deliverables_ready")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_heard_about_resource_id" ON "units" ("heard_about_resource_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_indexing_scenario_id" ON "units" ("indexing_scenario_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_intended_use_id" ON "units" ("intended_use_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_order_id" ON "units" ("order_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_use_right_id" ON "units" ("use_right_id")
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (2.8ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateCustomers (1)
Migrating to CreateOrders (2)
Migrating to CreateUnits (3)
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.8ms)[0m  CREATE TABLE "units" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "archive_id" integer, "availability_policy_id" integer, "bibl_id" integer, "heard_about_resource_id" integer, "indexing_scenario_id" integer, "use_right_id" integer, "order_id" integer DEFAULT 0 NOT NULL, "intended_use_id" integer DEFAULT 0 NOT NULL, "master_files_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "date_archived" datetime, "date_materials_received" datetime, "date_materials_returned" datetime, "date_patron_deliverables_ready" datetime, "patron_source_url" text, "remove_watermark" boolean DEFAULT 0 NOT NULL, "special_instructions" text, "staff_notes" text, "unit_extent_estimated" integer, "unit_extent_actual" integer, "unit_status" varchar(255), "date_queued_for_ingest" datetime, "date_dl_deliverables_ready" datetime, "master_file_discoverability" boolean DEFAULT 0 NOT NULL, "exclude_from_dl" boolean DEFAULT 0 NOT NULL, "include_in_dl" boolean DEFAULT 0 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_archive_id" ON "units" ("archive_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_availability_policy_id" ON "units" ("availability_policy_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_bibl_id" ON "units" ("bibl_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_date_archived" ON "units" ("date_archived")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_date_dl_deliverables_ready" ON "units" ("date_dl_deliverables_ready")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_heard_about_resource_id" ON "units" ("heard_about_resource_id")
  [1m[36m (0.4ms)[0m  [1mCREATE INDEX "index_units_on_indexing_scenario_id" ON "units" ("indexing_scenario_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_intended_use_id" ON "units" ("intended_use_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_order_id" ON "units" ("order_id")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_units_on_use_right_id" ON "units" ("use_right_id")
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (46.8ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (3.6ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateCustomers (1)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "customers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "department_id" integer, "academic_status_id" integer, "heard_about_service_id" integer, "last_name" varchar(255), "first_name" varchar(255), "email" varchar(255), "organization" varchar(255), "orders_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_customers_on_last_name" ON "customers" ("last_name")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_customers_on_first_name" ON "customers" ("first_name")
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_customers_on_email" ON "customers" ("email")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_customers_on_academic_status_id" ON "customers" ("academic_status_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_customers_on_department_id" ON "customers" ("department_id")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_customers_on_heard_about_service_id" ON "customers" ("heard_about_service_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('1')[0m
  [1m[35m (4.4ms)[0m  commit transaction
Migrating to CreateOrders (2)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (2.9ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to CreateCustomers (1)
Migrating to CreateOrders (2)
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "orders" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "agency_id" integer, "dvd_delivery_location_id" integer, "customer_id" integer DEFAULT 0 NOT NULL, "units_count" integer DEFAULT 0, "invoices_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "date_canceled" datetime, "date_deferred" datetime, "date_due" date, "date_fee_estimate_sent_to_customer" datetime, "date_order_approved" datetime, "date_permissions_given" datetime, "date_started" datetime, "date_request_submitted" datetime, "entered_by" varchar(255), "fee_actual" decimal(7,2), "fee_estimated" decimal(7,2), "is_approved" boolean DEFAULT 0 NOT NULL, "order_status" varchar(255), "order_title" varchar(255), "special_instructions" text, "staff_notes" text, "date_archiving_complete" datetime, "date_customer_notified" datetime, "date_finalization_begun" datetime, "date_patron_deliverables_complete" datetime, "email" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_customer_id" ON "orders" ("customer_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_agency_id" ON "orders" ("agency_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_dvd_delivery_location_id" ON "orders" ("dvd_delivery_location_id")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_orders_on_order_status" ON "orders" ("order_status")
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_orders_on_date_request_submitted" ON "orders" ("date_request_submitted")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_orders_on_date_due" ON "orders" ("date_due")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_date_archiving_complete" ON "orders" ("date_archiving_complete")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_date_order_approved" ON "orders" ("date_order_approved")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('2')[0m
  [1m[35m (4.4ms)[0m  commit transaction
Migrating to CreateUnits (3)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.8ms)[0m  CREATE TABLE "units" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "archive_id" integer, "availability_policy_id" integer, "bibl_id" integer, "heard_about_resource_id" integer, "indexing_scenario_id" integer, "use_right_id" integer, "order_id" integer DEFAULT 0 NOT NULL, "intended_use_id" integer DEFAULT 0 NOT NULL, "master_files_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "date_archived" datetime, "date_materials_received" datetime, "date_materials_returned" datetime, "date_patron_deliverables_ready" datetime, "patron_source_url" text, "remove_watermark" boolean DEFAULT 0 NOT NULL, "special_instructions" text, "staff_notes" text, "unit_extent_estimated" integer, "unit_extent_actual" integer, "unit_status" varchar(255), "date_queued_for_ingest" datetime, "date_dl_deliverables_ready" datetime, "master_file_discoverability" boolean DEFAULT 0 NOT NULL, "exclude_from_dl" boolean DEFAULT 0 NOT NULL, "include_in_dl" boolean DEFAULT 0 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_archive_id" ON "units" ("archive_id")[0m
  [1m[35m (0.7ms)[0m  CREATE INDEX "index_units_on_availability_policy_id" ON "units" ("availability_policy_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_bibl_id" ON "units" ("bibl_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_date_archived" ON "units" ("date_archived")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_date_dl_deliverables_ready" ON "units" ("date_dl_deliverables_ready")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_heard_about_resource_id" ON "units" ("heard_about_resource_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_indexing_scenario_id" ON "units" ("indexing_scenario_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_intended_use_id" ON "units" ("intended_use_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_order_id" ON "units" ("order_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_use_right_id" ON "units" ("use_right_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('3')[0m
  [1m[35m (4.5ms)[0m  commit transaction
Migrating to CreateBibls (4)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.4ms)[0m  CREATE TABLE "bibls" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "indexing_scenario_id" integer, "availability_policy_id" integer, "use_right_id" integer, "parent_bibl_id" integer DEFAULT 0 NOT NULL, "date_external_update" datetime, "description" varchar(255), "is_approved" boolean DEFAULT 0 NOT NULL, "is_collection" boolean DEFAULT 0 NOT NULL, "is_in_catalog" boolean DEFAULT 0 NOT NULL, "is_manuscript" boolean DEFAULT 0 NOT NULL, "is_personal_item" boolean DEFAULT 0 NOT NULL, "barcode" varchar(255), "call_number" varchar(255), "catalog_key" varchar(255), "citation" text, "copy" integer, "creator_name" varchar(255), "creator_name_type" varchar(255), "genre" varchar(255), "issue" varchar(255), "location" varchar(255), "resource_type" varchar(255), "series_title" varchar(255), "title" varchar(255), "title_control" varchar(255), "volume" varchar(255), "year" varchar(255), "year_type" varchar(255), "dc" text, "desc_metadata" text, "discoverability" boolean DEFAULT 't', "exemplar" varchar(255), "pid" varchar(255), "rels_ext" text, "rels_int" text, "solr" text(16777215), "date_dl_ingest" datetime, "automation_messages_count" integer DEFAULT 0, "orders_count" integer DEFAULT 0, "units_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_on_barcode" ON "bibls" ("barcode")[0m
  [1m[35m (0.4ms)[0m  CREATE INDEX "index_bibls_on_call_number" ON "bibls" ("call_number")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_on_catalog_key" ON "bibls" ("catalog_key")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_on_pid" ON "bibls" ("pid")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_on_title" ON "bibls" ("title")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_on_indexing_scenario_id" ON "bibls" ("indexing_scenario_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_on_availability_policy_id" ON "bibls" ("availability_policy_id")[0m
  [1m[35m (0.3ms)[0m  CREATE INDEX "index_bibls_on_parent_bibl_id" ON "bibls" ("parent_bibl_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_on_use_right_id" ON "bibls" ("use_right_id")[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('4')
  [1m[36m (5.0ms)[0m  [1mcommit transaction[0m
Migrating to CreateMasterFiles (5)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "master_files" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "availability_policy_id" integer, "component_id" integer, "indexing_scenario_id" integer, "use_right_id" integer, "unit_id" integer DEFAULT 0 NOT NULL, "automation_messages_count" integer DEFAULT 0, "description" varchar(255), "filename" varchar(255), "filesize" integer, "md5" varchar(255), "title" varchar(255), "dc" text, "desc_metadata" text, "discoverability" boolean DEFAULT 'f', "pid" varchar(255), "rels_ext" text, "rels_int" text, "solr" text(16777215), "transcription_text" text, "date_dl_ingest" datetime, "date_dl_update" datetime, "date_archived" datetime, "tech_meta_type" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_master_files_on_unit_id" ON "master_files" ("unit_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_master_files_on_component_id" ON "master_files" ("component_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_master_files_on_use_right_id" ON "master_files" ("use_right_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_master_files_on_indexing_scenario_id" ON "master_files" ("indexing_scenario_id")[0m
  [1m[35m (0.3ms)[0m  CREATE INDEX "index_master_files_on_availability_policy_id" ON "master_files" ("availability_policy_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_master_files_on_filename" ON "master_files" ("filename")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_master_files_on_title" ON "master_files" ("title")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_master_files_on_pid" ON "master_files" ("pid")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_master_files_on_tech_meta_type" ON "master_files" ("tech_meta_type")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('5')[0m
  [1m[35m (5.7ms)[0m  commit transaction
Migrating to CreateAvailabilityPolicies (6)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "availability_policies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "xacml_policy_url" varchar(255), "bibls_count" integer DEFAULT 0, "components_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('6')[0m
  [1m[35m (3.9ms)[0m  commit transaction
Migrating to CreateComponents (7)
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "components" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "availability_policy_id" integer, "component_type_id" integer, "indexing_scenario_id" integer, "use_right_id" integer, "parent_component_id" integer, "title" varchar(255), "content_desc" text, "date" varchar(255), "discoverability" boolean DEFAULT 't', "exemplar" varchar(255), "pid" varchar(255), "dc" text, "desc_metadata" text, "rels_ext" text, "rels_int" text, "solr" text(16777215), "date_dl_ingest" datetime, "date_dl_update" datetime, "master_files_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_components_on_availability_policy_id" ON "components" ("availability_policy_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_components_on_indexing_scenario_id" ON "components" ("indexing_scenario_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_components_on_component_type_id" ON "components" ("component_type_id")[0m
  [1m[35m (0.4ms)[0m  CREATE INDEX "index_components_on_use_right_id" ON "components" ("use_right_id")
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "bibls_components" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "bibl_id" integer, "component_id" integer) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_components_on_bibl_id" ON "bibls_components" ("bibl_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_components_on_component_id" ON "bibls_components" ("component_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('7')
  [1m[36m (5.8ms)[0m  [1mcommit transaction[0m
Migrating to CreateAgencies (8)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "agencies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "is_billable" boolean DEFAULT 0 NOT NULL, "last_name" varchar(255), "first_name" varchar(255), "address_1" varchar(255), "address_2" varchar(255), "city" varchar(255), "state" varchar(255), "country" varchar(255), "post_code" varchar(255), "phone" varchar(255), "ancestry" varchar(255), "names_depth_cache" varchar(255), "orders_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_agencies_on_ancestry" ON "agencies" ("ancestry")
  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX "index_agencies_on_name" ON "agencies" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('8')
  [1m[36m (4.6ms)[0m  [1mcommit transaction[0m
Migrating to CreateArchives (9)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mCREATE TABLE "archives" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.6ms)[0m  CREATE UNIQUE INDEX "index_archives_on_name" ON "archives" ("name")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('9')[0m
  [1m[35m (6.5ms)[0m  commit transaction
Migrating to CreateDepartments (10)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "departments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "customers_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.8ms)[0m  [1mCREATE UNIQUE INDEX "index_departments_on_name" ON "departments" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('10')
  [1m[36m (7.4ms)[0m  [1mcommit transaction[0m
Migrating to CreateHeardAboutServices (11)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "heard_about_services" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "description" varchar(255), "is_approved" boolean DEFAULT 0 NOT NULL, "is_internal_use_only" boolean DEFAULT 0 NOT NULL, "customers_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_heard_about_services_on_description" ON "heard_about_services" ("description")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('11')[0m
  [1m[35m (6.3ms)[0m  commit transaction
Migrating to CreateHeardAboutResources (12)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.8ms)[0m  CREATE TABLE "heard_about_resources" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "description" varchar(255), "is_approved" boolean DEFAULT 0 NOT NULL, "is_internal_use_only" boolean DEFAULT 0 NOT NULL, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_heard_about_resources_on_description" ON "heard_about_resources" ("description")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('12')
  [1m[36m (8.4ms)[0m  [1mcommit transaction[0m
Migrating to CreateInvoices (13)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "invoices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer DEFAULT 0 NOT NULL, "date_invoice_sent" datetime, "fee_amount_paid" decimal, "date_second_invoice_sent" datetime, "notes" text, "invoice_copy" blob(2097152), "permanet_nonpayment" boolean DEFAULT 'f', "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_invoices_on_order_id" ON "invoices" ("order_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('13')[0m
  [1m[35m (6.1ms)[0m  commit transaction
Migrating to CreateAddresses (14)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "addresses" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "addressable_id" integer NOT NULL, "addressable_type" varchar(20) NOT NULL, "address_type" varchar(20) NOT NULL, "last_name" varchar(255), "first_name" varchar(255), "address_1" varchar(255), "address_2" varchar(255), "city" varchar(255), "state" varchar(255), "country" varchar(255), "post_code" varchar(255), "phone" varchar(255), "organization" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('14')[0m
  [1m[35m (4.6ms)[0m  commit transaction
Migrating to CreateUseRights (15)
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  CREATE TABLE "use_rights" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "bibls_count" integer DEFAULT 0, "components_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.6ms)[0m  [1mCREATE UNIQUE INDEX "index_use_rights_on_name" ON "use_rights" ("name")[0m
  [1m[35m (1.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('15')
  [1m[36m (5.1ms)[0m  [1mcommit transaction[0m
Migrating to CreateCheckins (16)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "checkins" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "unit_id" integer, "admin_user_id" integer, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('16')
  [1m[36m (5.0ms)[0m  [1mcommit transaction[0m
Migrating to CreateLegacyIdentifiers (17)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "legacy_identifiers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "label" varchar(255), "description" varchar(255), "legacy_identifier" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_legacy_identifiers_on_label" ON "legacy_identifiers" ("label")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_legacy_identifiers_on_legacy_identifier" ON "legacy_identifiers" ("legacy_identifier")[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "bibls_legacy_identifiers" ("bibl_id" integer, "legacy_identifier_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_legacy_identifiers_on_bibl_id" ON "bibls_legacy_identifiers" ("bibl_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_legacy_identifiers_on_legacy_identifier_id" ON "bibls_legacy_identifiers" ("legacy_identifier_id")
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "legacy_identifiers_master_files" ("legacy_identifier_id" integer, "master_file_id" integer) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_legacy_identifiers_master_files_on_legacy_identifier_id" ON "legacy_identifiers_master_files" ("legacy_identifier_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_legacy_identifiers_master_files_on_master_file_id" ON "legacy_identifiers_master_files" ("master_file_id")[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "components_legacy_identifiers" ("component_id" integer, "legacy_identifier_id" integer) 
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_components_legacy_identifiers_on_component_id" ON "components_legacy_identifiers" ("component_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_components_legacy_identifiers_on_legacy_identifier_id" ON "components_legacy_identifiers" ("legacy_identifier_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('17')[0m
  [1m[35m (7.1ms)[0m  commit transaction
Migrating to CreateAutomationMessages (18)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "automation_messages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "messagable_id" integer NOT NULL, "messagable_type" integer(20) NOT NULL, "active_error" boolean DEFAULT 0 NOT NULL, "app" varchar(20), "processor" varchar(50), "message_type" varchar(20), "message" varchar(255), "class_name" varchar(50), "backtrace" text, "workflow_type" varchar(20), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_automation_messages_on_messagable_id_and_messagable_type" ON "automation_messages" ("messagable_id", "messagable_type")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_automation_messages_on_processor" ON "automation_messages" ("processor")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_automation_messages_on_message_type" ON "automation_messages" ("message_type")[0m
  [1m[35m (0.9ms)[0m  CREATE INDEX "index_automation_messages_on_workflow_type" ON "automation_messages" ("workflow_type")
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_automation_messages_on_active_error" ON "automation_messages" ("active_error")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('18')
  [1m[36m (6.2ms)[0m  [1mcommit transaction[0m
Migrating to CreateContainers (19)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "containers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "barcode" varchar(255), "container_type_id" integer, "label" varchar(255), "sequence_no" varchar(255), "parent_container_id" integer DEFAULT 0 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_containers_on_parent_container_id" ON "containers" ("parent_container_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_containers_on_container_type_id" ON "containers" ("container_type_id")[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "components_containers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "component_id" integer, "container_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_components_containers_on_component_id" ON "components_containers" ("component_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_components_containers_on_container_id" ON "components_containers" ("container_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('19')[0m
  [1m[35m (5.2ms)[0m  commit transaction
Migrating to CreateAcademicStatuses (20)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.8ms)[0m  CREATE TABLE "academic_statuses" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "customers_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.6ms)[0m  [1mCREATE UNIQUE INDEX "index_academic_statuses_on_name" ON "academic_statuses" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20')
  [1m[36m (6.2ms)[0m  [1mcommit transaction[0m
Migrating to CreateIntendedUses (21)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "intended_uses" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "description" varchar(255), "deliverable_format" varchar(255), "deliverable_resolution" varchar(255), "deliverable_resolution_unit" varchar(255), "is_internal_use_only" boolean DEFAULT 'f' NOT NULL, "is_approved" boolean DEFAULT 'f' NOT NULL, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.5ms)[0m  CREATE UNIQUE INDEX "index_intended_uses_on_description" ON "intended_uses" ("description")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('21')[0m
  [1m[35m (7.3ms)[0m  commit transaction
Migrating to CreateIndexingScenarios (22)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "indexing_scenarios" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "pid" varchar(255), "datastream_name" varchar(255), "repository_url" varchar(255), "bibls_count" integer DEFAULT 0, "components_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('22')[0m
  [1m[35m (4.5ms)[0m  commit transaction
Migrating to CreateSqlReports (23)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "sql_reports" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "sql" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('23')[0m
  [1m[35m (5.7ms)[0m  commit transaction
Migrating to CreateImageTechMeta (24)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "image_tech_meta" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "master_file_id" integer DEFAULT 0 NOT NULL, "image_format" varchar(255), "width" integer, "height" integer, "resolution" integer, "color_space" varchar(255), "depth" integer, "compression" varchar(255), "color_profile" varchar(255), "equipment" varchar(255), "software" varchar(255), "model" varchar(255), "exif_version" varchar(255), "capture_date" datetime, "iso" integer, "exposure_bias" varchar(255), "exposure_time" varchar(255), "aperture" varchar(255), "focal_length" decimal, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_image_tech_meta_on_master_file_id" ON "image_tech_meta" ("master_file_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('24')
  [1m[36m (4.5ms)[0m  [1mcommit transaction[0m
Migrating to CreateDeliveryMethods (25)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.8ms)[0m  [1mCREATE TABLE "delivery_methods" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "label" varchar(255), "description" varchar(255), "is_internal_use_only" boolean DEFAULT 'f' NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.6ms)[0m  CREATE UNIQUE INDEX "index_delivery_methods_on_label" ON "delivery_methods" ("label")
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delivery_methods_orders" ("delivery_method_id" integer, "order_id" integer) [0m
  [1m[35m (0.6ms)[0m  CREATE INDEX "index_delivery_methods_orders_on_delivery_method_id" ON "delivery_methods_orders" ("delivery_method_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_delivery_methods_orders_on_order_id" ON "delivery_methods_orders" ("order_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('25')
  [1m[36m (7.3ms)[0m  [1mcommit transaction[0m
Migrating to CreateDvdDeliveryLocations (26)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "dvd_delivery_locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "email_desc" text, "orders_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.5ms)[0m  CREATE UNIQUE INDEX "index_dvd_delivery_locations_on_name" ON "dvd_delivery_locations" ("name")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('26')[0m
  [1m[35m (6.6ms)[0m  commit transaction
Migrating to CreateUnitImportSources (27)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "unit_import_sources" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "unit_id" integer DEFAULT 0 NOT NULL, "standard" varchar(255), "version" varchar(255), "source" text(2147483647), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_unit_import_sources_on_unit_id" ON "unit_import_sources" ("unit_id")[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('27')
  [1m[36m (8.8ms)[0m  [1mcommit transaction[0m
Migrating to CreateComponentTypes (28)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mCREATE TABLE "component_types" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.5ms)[0m  CREATE UNIQUE INDEX "index_component_types_on_name" ON "component_types" ("name")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('28')[0m
  [1m[35m (5.2ms)[0m  commit transaction
Migrating to CreateContainerTypes (29)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "container_types" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255)) 
  [1m[36m (0.5ms)[0m  [1mCREATE UNIQUE INDEX "index_container_types_on_name" ON "container_types" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('29')
  [1m[36m (4.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.3ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (55.6ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (3.2ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateCustomers (1)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "customers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "department_id" integer, "academic_status_id" integer, "heard_about_service_id" integer, "last_name" varchar(255), "first_name" varchar(255), "email" varchar(255), "organization" varchar(255), "orders_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_customers_on_last_name" ON "customers" ("last_name")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_customers_on_first_name" ON "customers" ("first_name")
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_customers_on_email" ON "customers" ("email")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_customers_on_academic_status_id" ON "customers" ("academic_status_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_customers_on_department_id" ON "customers" ("department_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_customers_on_heard_about_service_id" ON "customers" ("heard_about_service_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('1')[0m
  [1m[35m (5.2ms)[0m  commit transaction
Migrating to CreateOrders (2)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "orders" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "agency_id" integer, "dvd_delivery_location_id" integer, "customer_id" integer DEFAULT 0 NOT NULL, "units_count" integer DEFAULT 0, "invoices_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "date_canceled" datetime, "date_deferred" datetime, "date_due" date, "date_fee_estimate_sent_to_customer" datetime, "date_order_approved" datetime, "date_permissions_given" datetime, "date_started" datetime, "date_request_submitted" datetime, "entered_by" varchar(255), "fee_actual" decimal(7,2), "fee_estimated" decimal(7,2), "is_approved" boolean DEFAULT 0 NOT NULL, "order_status" varchar(255), "order_title" varchar(255), "special_instructions" text, "staff_notes" text, "date_archiving_complete" datetime, "date_customer_notified" datetime, "date_finalization_begun" datetime, "date_patron_deliverables_complete" datetime, "email" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_orders_on_customer_id" ON "orders" ("customer_id")[0m
  [1m[35m (0.3ms)[0m  CREATE INDEX "index_orders_on_agency_id" ON "orders" ("agency_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_dvd_delivery_location_id" ON "orders" ("dvd_delivery_location_id")[0m
  [1m[35m (0.3ms)[0m  CREATE INDEX "index_orders_on_order_status" ON "orders" ("order_status")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_date_request_submitted" ON "orders" ("date_request_submitted")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_date_due" ON "orders" ("date_due")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_date_archiving_complete" ON "orders" ("date_archiving_complete")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_date_order_approved" ON "orders" ("date_order_approved")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('2')[0m
  [1m[35m (4.4ms)[0m  commit transaction
Migrating to CreateUnits (3)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "units" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "archive_id" integer, "availability_policy_id" integer, "bibl_id" integer, "heard_about_resource_id" integer, "indexing_scenario_id" integer, "use_right_id" integer, "order_id" integer DEFAULT 0 NOT NULL, "intended_use_id" integer DEFAULT 0 NOT NULL, "master_files_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "date_archived" datetime, "date_materials_received" datetime, "date_materials_returned" datetime, "date_patron_deliverables_ready" datetime, "patron_source_url" text, "remove_watermark" boolean DEFAULT 0 NOT NULL, "special_instructions" text, "staff_notes" text, "unit_extent_estimated" integer, "unit_extent_actual" integer, "unit_status" varchar(255), "date_queued_for_ingest" datetime, "date_dl_deliverables_ready" datetime, "master_file_discoverability" boolean DEFAULT 0 NOT NULL, "exclude_from_dl" boolean DEFAULT 0 NOT NULL, "include_in_dl" boolean DEFAULT 0 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_archive_id" ON "units" ("archive_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_availability_policy_id" ON "units" ("availability_policy_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_bibl_id" ON "units" ("bibl_id")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_units_on_date_archived" ON "units" ("date_archived")
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_units_on_date_dl_deliverables_ready" ON "units" ("date_dl_deliverables_ready")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_units_on_heard_about_resource_id" ON "units" ("heard_about_resource_id")
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_units_on_indexing_scenario_id" ON "units" ("indexing_scenario_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_intended_use_id" ON "units" ("intended_use_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_order_id" ON "units" ("order_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_use_right_id" ON "units" ("use_right_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('3')[0m
  [1m[35m (4.1ms)[0m  commit transaction
Migrating to CreateBibls (4)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.4ms)[0m  CREATE TABLE "bibls" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "indexing_scenario_id" integer, "availability_policy_id" integer, "use_right_id" integer, "parent_bibl_id" integer DEFAULT 0 NOT NULL, "date_external_update" datetime, "description" varchar(255), "is_approved" boolean DEFAULT 0 NOT NULL, "is_collection" boolean DEFAULT 0 NOT NULL, "is_in_catalog" boolean DEFAULT 0 NOT NULL, "is_manuscript" boolean DEFAULT 0 NOT NULL, "is_personal_item" boolean DEFAULT 0 NOT NULL, "barcode" varchar(255), "call_number" varchar(255), "catalog_key" varchar(255), "citation" text, "copy" integer, "creator_name" varchar(255), "creator_name_type" varchar(255), "genre" varchar(255), "issue" varchar(255), "location" varchar(255), "resource_type" varchar(255), "series_title" varchar(255), "title" varchar(255), "title_control" varchar(255), "volume" varchar(255), "year" varchar(255), "year_type" varchar(255), "dc" text, "desc_metadata" text, "discoverability" boolean DEFAULT 't', "exemplar" varchar(255), "pid" varchar(255), "rels_ext" text, "rels_int" text, "solr" text(16777215), "date_dl_ingest" datetime, "automation_messages_count" integer DEFAULT 0, "orders_count" integer DEFAULT 0, "units_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_bibls_on_barcode" ON "bibls" ("barcode")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_on_call_number" ON "bibls" ("call_number")
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_bibls_on_catalog_key" ON "bibls" ("catalog_key")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_on_pid" ON "bibls" ("pid")
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_bibls_on_title" ON "bibls" ("title")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_bibls_on_indexing_scenario_id" ON "bibls" ("indexing_scenario_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_on_availability_policy_id" ON "bibls" ("availability_policy_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_on_parent_bibl_id" ON "bibls" ("parent_bibl_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_on_use_right_id" ON "bibls" ("use_right_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('4')
  [1m[36m (5.1ms)[0m  [1mcommit transaction[0m
Migrating to CreateMasterFiles (5)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "master_files" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "availability_policy_id" integer, "component_id" integer, "indexing_scenario_id" integer, "use_right_id" integer, "unit_id" integer DEFAULT 0 NOT NULL, "automation_messages_count" integer DEFAULT 0, "description" varchar(255), "filename" varchar(255), "filesize" integer, "md5" varchar(255), "title" varchar(255), "dc" text, "desc_metadata" text, "discoverability" boolean DEFAULT 'f', "pid" varchar(255), "rels_ext" text, "rels_int" text, "solr" text(16777215), "transcription_text" text, "date_dl_ingest" datetime, "date_dl_update" datetime, "date_archived" datetime, "tech_meta_type" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_master_files_on_unit_id" ON "master_files" ("unit_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_master_files_on_component_id" ON "master_files" ("component_id")[0m
  [1m[35m (0.7ms)[0m  CREATE INDEX "index_master_files_on_use_right_id" ON "master_files" ("use_right_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_master_files_on_indexing_scenario_id" ON "master_files" ("indexing_scenario_id")[0m
  [1m[35m (0.3ms)[0m  CREATE INDEX "index_master_files_on_availability_policy_id" ON "master_files" ("availability_policy_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_master_files_on_filename" ON "master_files" ("filename")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_master_files_on_title" ON "master_files" ("title")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_master_files_on_pid" ON "master_files" ("pid")[0m
  [1m[35m (0.6ms)[0m  CREATE INDEX "index_master_files_on_tech_meta_type" ON "master_files" ("tech_meta_type")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('5')[0m
  [1m[35m (5.3ms)[0m  commit transaction
Migrating to CreateAvailabilityPolicies (6)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "availability_policies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "xacml_policy_url" varchar(255), "bibls_count" integer DEFAULT 0, "components_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('6')[0m
  [1m[35m (4.7ms)[0m  commit transaction
Migrating to CreateComponents (7)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.8ms)[0m  CREATE TABLE "components" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "availability_policy_id" integer, "component_type_id" integer, "indexing_scenario_id" integer, "use_right_id" integer, "parent_component_id" integer, "title" varchar(255), "content_desc" text, "date" varchar(255), "discoverability" boolean DEFAULT 't', "exemplar" varchar(255), "pid" varchar(255), "dc" text, "desc_metadata" text, "rels_ext" text, "rels_int" text, "solr" text(16777215), "date_dl_ingest" datetime, "date_dl_update" datetime, "master_files_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_components_on_availability_policy_id" ON "components" ("availability_policy_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_components_on_indexing_scenario_id" ON "components" ("indexing_scenario_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_components_on_component_type_id" ON "components" ("component_type_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_components_on_use_right_id" ON "components" ("use_right_id")
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "bibls_components" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "bibl_id" integer, "component_id" integer) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_components_on_bibl_id" ON "bibls_components" ("bibl_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_components_on_component_id" ON "bibls_components" ("component_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('7')
  [1m[36m (4.6ms)[0m  [1mcommit transaction[0m
Migrating to CreateAgencies (8)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.8ms)[0m  [1mCREATE TABLE "agencies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "is_billable" boolean DEFAULT 0 NOT NULL, "last_name" varchar(255), "first_name" varchar(255), "address_1" varchar(255), "address_2" varchar(255), "city" varchar(255), "state" varchar(255), "country" varchar(255), "post_code" varchar(255), "phone" varchar(255), "ancestry" varchar(255), "names_depth_cache" varchar(255), "orders_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_agencies_on_ancestry" ON "agencies" ("ancestry")
  [1m[36m (2.1ms)[0m  [1mCREATE UNIQUE INDEX "index_agencies_on_name" ON "agencies" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('8')
  [1m[36m (6.1ms)[0m  [1mcommit transaction[0m
Migrating to CreateArchives (9)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "archives" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.5ms)[0m  CREATE UNIQUE INDEX "index_archives_on_name" ON "archives" ("name")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('9')[0m
  [1m[35m (8.6ms)[0m  commit transaction
Migrating to CreateDepartments (10)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "departments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "customers_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX "index_departments_on_name" ON "departments" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('10')
  [1m[36m (5.2ms)[0m  [1mcommit transaction[0m
Migrating to CreateHeardAboutServices (11)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.8ms)[0m  [1mCREATE TABLE "heard_about_services" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "description" varchar(255), "is_approved" boolean DEFAULT 0 NOT NULL, "is_internal_use_only" boolean DEFAULT 0 NOT NULL, "customers_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_heard_about_services_on_description" ON "heard_about_services" ("description")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('11')[0m
  [1m[35m (4.3ms)[0m  commit transaction
Migrating to CreateHeardAboutResources (12)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "heard_about_resources" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "description" varchar(255), "is_approved" boolean DEFAULT 0 NOT NULL, "is_internal_use_only" boolean DEFAULT 0 NOT NULL, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_heard_about_resources_on_description" ON "heard_about_resources" ("description")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('12')
  [1m[36m (5.6ms)[0m  [1mcommit transaction[0m
Migrating to CreateInvoices (13)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "invoices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer DEFAULT 0 NOT NULL, "date_invoice_sent" datetime, "fee_amount_paid" decimal, "date_second_invoice_sent" datetime, "notes" text, "invoice_copy" blob(2097152), "permanet_nonpayment" boolean DEFAULT 'f', "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_invoices_on_order_id" ON "invoices" ("order_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('13')[0m
  [1m[35m (6.7ms)[0m  commit transaction
Migrating to CreateAddresses (14)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "addresses" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "addressable_id" integer NOT NULL, "addressable_type" varchar(20) NOT NULL, "address_type" varchar(20) NOT NULL, "last_name" varchar(255), "first_name" varchar(255), "address_1" varchar(255), "address_2" varchar(255), "city" varchar(255), "state" varchar(255), "country" varchar(255), "post_code" varchar(255), "phone" varchar(255), "organization" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('14')[0m
  [1m[35m (5.5ms)[0m  commit transaction
Migrating to CreateUseRights (15)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "use_rights" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "bibls_count" integer DEFAULT 0, "components_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.5ms)[0m  [1mCREATE UNIQUE INDEX "index_use_rights_on_name" ON "use_rights" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('15')
  [1m[36m (5.0ms)[0m  [1mcommit transaction[0m
Migrating to CreateCheckins (16)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "checkins" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "unit_id" integer, "admin_user_id" integer, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('16')
  [1m[36m (3.8ms)[0m  [1mcommit transaction[0m
Migrating to CreateLegacyIdentifiers (17)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "legacy_identifiers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "label" varchar(255), "description" varchar(255), "legacy_identifier" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_legacy_identifiers_on_label" ON "legacy_identifiers" ("label")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_legacy_identifiers_on_legacy_identifier" ON "legacy_identifiers" ("legacy_identifier")[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "bibls_legacy_identifiers" ("bibl_id" integer, "legacy_identifier_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_bibls_legacy_identifiers_on_bibl_id" ON "bibls_legacy_identifiers" ("bibl_id")[0m
  [1m[35m (0.4ms)[0m  CREATE INDEX "index_bibls_legacy_identifiers_on_legacy_identifier_id" ON "bibls_legacy_identifiers" ("legacy_identifier_id")
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "legacy_identifiers_master_files" ("legacy_identifier_id" integer, "master_file_id" integer) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_legacy_identifiers_master_files_on_legacy_identifier_id" ON "legacy_identifiers_master_files" ("legacy_identifier_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_legacy_identifiers_master_files_on_master_file_id" ON "legacy_identifiers_master_files" ("master_file_id")[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "components_legacy_identifiers" ("component_id" integer, "legacy_identifier_id" integer) 
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_components_legacy_identifiers_on_component_id" ON "components_legacy_identifiers" ("component_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_components_legacy_identifiers_on_legacy_identifier_id" ON "components_legacy_identifiers" ("legacy_identifier_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('17')[0m
  [1m[35m (5.7ms)[0m  commit transaction
Migrating to CreateAutomationMessages (18)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "automation_messages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "messagable_id" integer NOT NULL, "messagable_type" integer(20) NOT NULL, "active_error" boolean DEFAULT 0 NOT NULL, "app" varchar(20), "processor" varchar(50), "message_type" varchar(20), "message" varchar(255), "class_name" varchar(50), "backtrace" text, "workflow_type" varchar(20), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_automation_messages_on_messagable_id_and_messagable_type" ON "automation_messages" ("messagable_id", "messagable_type")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_automation_messages_on_processor" ON "automation_messages" ("processor")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_automation_messages_on_message_type" ON "automation_messages" ("message_type")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_automation_messages_on_workflow_type" ON "automation_messages" ("workflow_type")
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_automation_messages_on_active_error" ON "automation_messages" ("active_error")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('18')
  [1m[36m (4.7ms)[0m  [1mcommit transaction[0m
Migrating to CreateContainers (19)
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "containers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "barcode" varchar(255), "container_type_id" integer, "label" varchar(255), "sequence_no" varchar(255), "parent_container_id" integer DEFAULT 0 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_containers_on_parent_container_id" ON "containers" ("parent_container_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_containers_on_container_type_id" ON "containers" ("container_type_id")[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "components_containers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "component_id" integer, "container_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_components_containers_on_component_id" ON "components_containers" ("component_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_components_containers_on_container_id" ON "components_containers" ("container_id")
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('19')[0m
  [1m[35m (7.1ms)[0m  commit transaction
Migrating to CreateAcademicStatuses (20)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "academic_statuses" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "customers_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.5ms)[0m  [1mCREATE UNIQUE INDEX "index_academic_statuses_on_name" ON "academic_statuses" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20')
  [1m[36m (4.9ms)[0m  [1mcommit transaction[0m
Migrating to CreateIntendedUses (21)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.8ms)[0m  [1mCREATE TABLE "intended_uses" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "description" varchar(255), "deliverable_format" varchar(255), "deliverable_resolution" varchar(255), "deliverable_resolution_unit" varchar(255), "is_internal_use_only" boolean DEFAULT 'f' NOT NULL, "is_approved" boolean DEFAULT 'f' NOT NULL, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.5ms)[0m  CREATE UNIQUE INDEX "index_intended_uses_on_description" ON "intended_uses" ("description")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('21')[0m
  [1m[35m (5.5ms)[0m  commit transaction
Migrating to CreateIndexingScenarios (22)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "indexing_scenarios" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "pid" varchar(255), "datastream_name" varchar(255), "repository_url" varchar(255), "bibls_count" integer DEFAULT 0, "components_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('22')[0m
  [1m[35m (6.1ms)[0m  commit transaction
Migrating to CreateSqlReports (23)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "sql_reports" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "sql" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('23')[0m
  [1m[35m (5.4ms)[0m  commit transaction
Migrating to CreateImageTechMeta (24)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "image_tech_meta" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "master_file_id" integer DEFAULT 0 NOT NULL, "image_format" varchar(255), "width" integer, "height" integer, "resolution" integer, "color_space" varchar(255), "depth" integer, "compression" varchar(255), "color_profile" varchar(255), "equipment" varchar(255), "software" varchar(255), "model" varchar(255), "exif_version" varchar(255), "capture_date" datetime, "iso" integer, "exposure_bias" varchar(255), "exposure_time" varchar(255), "aperture" varchar(255), "focal_length" decimal, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_image_tech_meta_on_master_file_id" ON "image_tech_meta" ("master_file_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('24')
  [1m[36m (5.9ms)[0m  [1mcommit transaction[0m
Migrating to CreateDeliveryMethods (25)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "delivery_methods" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "label" varchar(255), "description" varchar(255), "is_internal_use_only" boolean DEFAULT 'f' NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.6ms)[0m  CREATE UNIQUE INDEX "index_delivery_methods_on_label" ON "delivery_methods" ("label")
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delivery_methods_orders" ("delivery_method_id" integer, "order_id" integer) [0m
  [1m[35m (0.3ms)[0m  CREATE INDEX "index_delivery_methods_orders_on_delivery_method_id" ON "delivery_methods_orders" ("delivery_method_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_delivery_methods_orders_on_order_id" ON "delivery_methods_orders" ("order_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('25')
  [1m[36m (8.3ms)[0m  [1mcommit transaction[0m
Migrating to CreateDvdDeliveryLocations (26)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.8ms)[0m  [1mCREATE TABLE "dvd_delivery_locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "email_desc" text, "orders_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.5ms)[0m  CREATE UNIQUE INDEX "index_dvd_delivery_locations_on_name" ON "dvd_delivery_locations" ("name")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('26')[0m
  [1m[35m (5.6ms)[0m  commit transaction
Migrating to CreateUnitImportSources (27)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "unit_import_sources" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "unit_id" integer DEFAULT 0 NOT NULL, "standard" varchar(255), "version" varchar(255), "source" text(2147483647), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_unit_import_sources_on_unit_id" ON "unit_import_sources" ("unit_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('27')
  [1m[36m (7.5ms)[0m  [1mcommit transaction[0m
Migrating to CreateComponentTypes (28)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "component_types" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.4ms)[0m  CREATE UNIQUE INDEX "index_component_types_on_name" ON "component_types" ("name")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('28')[0m
  [1m[35m (5.8ms)[0m  commit transaction
Migrating to CreateContainerTypes (29)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "container_types" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255)) 
  [1m[36m (0.5ms)[0m  [1mCREATE UNIQUE INDEX "index_container_types_on_name" ON "container_types" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('29')
  [1m[36m (6.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.3ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (35.6ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (3.3ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (3.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateCustomers (1)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "customers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "department_id" integer, "academic_status_id" integer, "heard_about_service_id" integer, "last_name" varchar(255), "first_name" varchar(255), "email" varchar(255), "organization" varchar(255), "orders_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_customers_on_last_name" ON "customers" ("last_name")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_customers_on_first_name" ON "customers" ("first_name")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_customers_on_email" ON "customers" ("email")[0m
  [1m[35m (0.1ms)[0m  CREATE INDEX "index_customers_on_academic_status_id" ON "customers" ("academic_status_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_customers_on_department_id" ON "customers" ("department_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_customers_on_heard_about_service_id" ON "customers" ("heard_about_service_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('1')[0m
  [1m[35m (4.4ms)[0m  commit transaction
Migrating to CreateOrders (2)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "orders" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "agency_id" integer, "dvd_delivery_location_id" integer, "customer_id" integer DEFAULT 0 NOT NULL, "units_count" integer DEFAULT 0, "invoices_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "date_canceled" datetime, "date_deferred" datetime, "date_due" date, "date_fee_estimate_sent_to_customer" datetime, "date_order_approved" datetime, "date_permissions_given" datetime, "date_started" datetime, "date_request_submitted" datetime, "entered_by" varchar(255), "fee_actual" decimal(7,2), "fee_estimated" decimal(7,2), "is_approved" boolean DEFAULT 0 NOT NULL, "order_status" varchar(255), "order_title" varchar(255), "special_instructions" text, "staff_notes" text, "date_archiving_complete" datetime, "date_customer_notified" datetime, "date_finalization_begun" datetime, "date_patron_deliverables_complete" datetime, "email" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_customer_id" ON "orders" ("customer_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_agency_id" ON "orders" ("agency_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_dvd_delivery_location_id" ON "orders" ("dvd_delivery_location_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_order_status" ON "orders" ("order_status")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_date_request_submitted" ON "orders" ("date_request_submitted")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_date_due" ON "orders" ("date_due")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_orders_on_date_archiving_complete" ON "orders" ("date_archiving_complete")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_orders_on_date_order_approved" ON "orders" ("date_order_approved")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('2')[0m
  [1m[35m (4.1ms)[0m  commit transaction
Migrating to CreateUnits (3)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "units" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "archive_id" integer, "availability_policy_id" integer, "bibl_id" integer, "heard_about_resource_id" integer, "indexing_scenario_id" integer, "use_right_id" integer, "order_id" integer DEFAULT 0 NOT NULL, "intended_use_id" integer DEFAULT 0 NOT NULL, "master_files_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "date_archived" datetime, "date_materials_received" datetime, "date_materials_returned" datetime, "date_patron_deliverables_ready" datetime, "patron_source_url" text, "remove_watermark" boolean DEFAULT 0 NOT NULL, "special_instructions" text, "staff_notes" text, "unit_extent_estimated" integer, "unit_extent_actual" integer, "unit_status" varchar(255), "date_queued_for_ingest" datetime, "date_dl_deliverables_ready" datetime, "master_file_discoverability" boolean DEFAULT 0 NOT NULL, "exclude_from_dl" boolean DEFAULT 0 NOT NULL, "include_in_dl" boolean DEFAULT 0 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_archive_id" ON "units" ("archive_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_availability_policy_id" ON "units" ("availability_policy_id")
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_units_on_bibl_id" ON "units" ("bibl_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_date_archived" ON "units" ("date_archived")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_date_dl_deliverables_ready" ON "units" ("date_dl_deliverables_ready")[0m
  [1m[35m (0.3ms)[0m  CREATE INDEX "index_units_on_heard_about_resource_id" ON "units" ("heard_about_resource_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_indexing_scenario_id" ON "units" ("indexing_scenario_id")[0m
  [1m[35m (0.5ms)[0m  CREATE INDEX "index_units_on_intended_use_id" ON "units" ("intended_use_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_units_on_order_id" ON "units" ("order_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_units_on_use_right_id" ON "units" ("use_right_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('3')[0m
  [1m[35m (4.4ms)[0m  commit transaction
Migrating to CreateBibls (4)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.4ms)[0m  CREATE TABLE "bibls" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "indexing_scenario_id" integer, "availability_policy_id" integer, "use_right_id" integer, "parent_bibl_id" integer DEFAULT 0 NOT NULL, "date_external_update" datetime, "description" varchar(255), "is_approved" boolean DEFAULT 0 NOT NULL, "is_collection" boolean DEFAULT 0 NOT NULL, "is_in_catalog" boolean DEFAULT 0 NOT NULL, "is_manuscript" boolean DEFAULT 0 NOT NULL, "is_personal_item" boolean DEFAULT 0 NOT NULL, "barcode" varchar(255), "call_number" varchar(255), "catalog_key" varchar(255), "citation" text, "copy" integer, "creator_name" varchar(255), "creator_name_type" varchar(255), "genre" varchar(255), "issue" varchar(255), "location" varchar(255), "resource_type" varchar(255), "series_title" varchar(255), "title" varchar(255), "title_control" varchar(255), "volume" varchar(255), "year" varchar(255), "year_type" varchar(255), "dc" text, "desc_metadata" text, "discoverability" boolean DEFAULT 't', "exemplar" varchar(255), "pid" varchar(255), "rels_ext" text, "rels_int" text, "solr" text(16777215), "date_dl_ingest" datetime, "automation_messages_count" integer DEFAULT 0, "orders_count" integer DEFAULT 0, "units_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_on_barcode" ON "bibls" ("barcode")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_on_call_number" ON "bibls" ("call_number")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_on_catalog_key" ON "bibls" ("catalog_key")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_on_pid" ON "bibls" ("pid")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_on_title" ON "bibls" ("title")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_on_indexing_scenario_id" ON "bibls" ("indexing_scenario_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_on_availability_policy_id" ON "bibls" ("availability_policy_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_on_parent_bibl_id" ON "bibls" ("parent_bibl_id")
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_bibls_on_use_right_id" ON "bibls" ("use_right_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('4')
  [1m[36m (4.2ms)[0m  [1mcommit transaction[0m
Migrating to CreateMasterFiles (5)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "master_files" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "availability_policy_id" integer, "component_id" integer, "indexing_scenario_id" integer, "use_right_id" integer, "unit_id" integer DEFAULT 0 NOT NULL, "automation_messages_count" integer DEFAULT 0, "description" varchar(255), "filename" varchar(255), "filesize" integer, "md5" varchar(255), "title" varchar(255), "dc" text, "desc_metadata" text, "discoverability" boolean DEFAULT 'f', "pid" varchar(255), "rels_ext" text, "rels_int" text, "solr" text(16777215), "transcription_text" text, "date_dl_ingest" datetime, "date_dl_update" datetime, "date_archived" datetime, "tech_meta_type" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_master_files_on_unit_id" ON "master_files" ("unit_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_master_files_on_component_id" ON "master_files" ("component_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_master_files_on_use_right_id" ON "master_files" ("use_right_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_master_files_on_indexing_scenario_id" ON "master_files" ("indexing_scenario_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_master_files_on_availability_policy_id" ON "master_files" ("availability_policy_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_master_files_on_filename" ON "master_files" ("filename")[0m
  [1m[35m (0.3ms)[0m  CREATE INDEX "index_master_files_on_title" ON "master_files" ("title")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_master_files_on_pid" ON "master_files" ("pid")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_master_files_on_tech_meta_type" ON "master_files" ("tech_meta_type")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('5')[0m
  [1m[35m (4.9ms)[0m  commit transaction
Migrating to CreateAvailabilityPolicies (6)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "availability_policies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "xacml_policy_url" varchar(255), "bibls_count" integer DEFAULT 0, "components_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('6')[0m
  [1m[35m (6.3ms)[0m  commit transaction
Migrating to CreateComponents (7)
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "components" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "availability_policy_id" integer, "component_type_id" integer, "indexing_scenario_id" integer, "use_right_id" integer, "parent_component_id" integer, "title" varchar(255), "content_desc" text, "date" varchar(255), "discoverability" boolean DEFAULT 't', "exemplar" varchar(255), "pid" varchar(255), "dc" text, "desc_metadata" text, "rels_ext" text, "rels_int" text, "solr" text(16777215), "date_dl_ingest" datetime, "date_dl_update" datetime, "master_files_count" integer DEFAULT 0, "automation_messages_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_components_on_availability_policy_id" ON "components" ("availability_policy_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_components_on_indexing_scenario_id" ON "components" ("indexing_scenario_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_components_on_component_type_id" ON "components" ("component_type_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_components_on_use_right_id" ON "components" ("use_right_id")
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "bibls_components" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "bibl_id" integer, "component_id" integer) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_components_on_bibl_id" ON "bibls_components" ("bibl_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_components_on_component_id" ON "bibls_components" ("component_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('7')
  [1m[36m (5.1ms)[0m  [1mcommit transaction[0m
Migrating to CreateAgencies (8)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "agencies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "is_billable" boolean DEFAULT 0 NOT NULL, "last_name" varchar(255), "first_name" varchar(255), "address_1" varchar(255), "address_2" varchar(255), "city" varchar(255), "state" varchar(255), "country" varchar(255), "post_code" varchar(255), "phone" varchar(255), "ancestry" varchar(255), "names_depth_cache" varchar(255), "orders_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_agencies_on_ancestry" ON "agencies" ("ancestry")
  [1m[36m (0.5ms)[0m  [1mCREATE UNIQUE INDEX "index_agencies_on_name" ON "agencies" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('8')
  [1m[36m (5.0ms)[0m  [1mcommit transaction[0m
Migrating to CreateArchives (9)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "archives" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.6ms)[0m  CREATE UNIQUE INDEX "index_archives_on_name" ON "archives" ("name")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('9')[0m
  [1m[35m (7.9ms)[0m  commit transaction
Migrating to CreateDepartments (10)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "departments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "customers_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.5ms)[0m  [1mCREATE UNIQUE INDEX "index_departments_on_name" ON "departments" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('10')
  [1m[36m (4.6ms)[0m  [1mcommit transaction[0m
Migrating to CreateHeardAboutServices (11)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "heard_about_services" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "description" varchar(255), "is_approved" boolean DEFAULT 0 NOT NULL, "is_internal_use_only" boolean DEFAULT 0 NOT NULL, "customers_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_heard_about_services_on_description" ON "heard_about_services" ("description")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('11')[0m
  [1m[35m (4.6ms)[0m  commit transaction
Migrating to CreateHeardAboutResources (12)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.8ms)[0m  CREATE TABLE "heard_about_resources" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "description" varchar(255), "is_approved" boolean DEFAULT 0 NOT NULL, "is_internal_use_only" boolean DEFAULT 0 NOT NULL, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_heard_about_resources_on_description" ON "heard_about_resources" ("description")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('12')
  [1m[36m (6.7ms)[0m  [1mcommit transaction[0m
Migrating to CreateInvoices (13)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "invoices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer DEFAULT 0 NOT NULL, "date_invoice_sent" datetime, "fee_amount_paid" decimal, "date_second_invoice_sent" datetime, "notes" text, "invoice_copy" blob(2097152), "permanet_nonpayment" boolean DEFAULT 'f', "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_invoices_on_order_id" ON "invoices" ("order_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('13')[0m
  [1m[35m (6.4ms)[0m  commit transaction
Migrating to CreateAddresses (14)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "addresses" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "addressable_id" integer NOT NULL, "addressable_type" varchar(20) NOT NULL, "address_type" varchar(20) NOT NULL, "last_name" varchar(255), "first_name" varchar(255), "address_1" varchar(255), "address_2" varchar(255), "city" varchar(255), "state" varchar(255), "country" varchar(255), "post_code" varchar(255), "phone" varchar(255), "organization" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('14')[0m
  [1m[35m (4.4ms)[0m  commit transaction
Migrating to CreateUseRights (15)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "use_rights" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "bibls_count" integer DEFAULT 0, "components_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX "index_use_rights_on_name" ON "use_rights" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('15')
  [1m[36m (4.1ms)[0m  [1mcommit transaction[0m
Migrating to CreateCheckins (16)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "checkins" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "unit_id" integer, "admin_user_id" integer, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('16')
  [1m[36m (4.5ms)[0m  [1mcommit transaction[0m
Migrating to CreateLegacyIdentifiers (17)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "legacy_identifiers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "label" varchar(255), "description" varchar(255), "legacy_identifier" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_legacy_identifiers_on_label" ON "legacy_identifiers" ("label")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_legacy_identifiers_on_legacy_identifier" ON "legacy_identifiers" ("legacy_identifier")[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "bibls_legacy_identifiers" ("bibl_id" integer, "legacy_identifier_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_bibls_legacy_identifiers_on_bibl_id" ON "bibls_legacy_identifiers" ("bibl_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_bibls_legacy_identifiers_on_legacy_identifier_id" ON "bibls_legacy_identifiers" ("legacy_identifier_id")
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "legacy_identifiers_master_files" ("legacy_identifier_id" integer, "master_file_id" integer) [0m
  [1m[35m (0.8ms)[0m  CREATE INDEX "index_legacy_identifiers_master_files_on_legacy_identifier_id" ON "legacy_identifiers_master_files" ("legacy_identifier_id")
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_legacy_identifiers_master_files_on_master_file_id" ON "legacy_identifiers_master_files" ("master_file_id")[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "components_legacy_identifiers" ("component_id" integer, "legacy_identifier_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_components_legacy_identifiers_on_component_id" ON "components_legacy_identifiers" ("component_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_components_legacy_identifiers_on_legacy_identifier_id" ON "components_legacy_identifiers" ("legacy_identifier_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('17')[0m
  [1m[35m (6.2ms)[0m  commit transaction
Migrating to CreateAutomationMessages (18)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "automation_messages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "messagable_id" integer NOT NULL, "messagable_type" integer(20) NOT NULL, "active_error" boolean DEFAULT 0 NOT NULL, "app" varchar(20), "processor" varchar(50), "message_type" varchar(20), "message" varchar(255), "class_name" varchar(50), "backtrace" text, "workflow_type" varchar(20), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_automation_messages_on_messagable_id_and_messagable_type" ON "automation_messages" ("messagable_id", "messagable_type")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_automation_messages_on_processor" ON "automation_messages" ("processor")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_automation_messages_on_message_type" ON "automation_messages" ("message_type")[0m
  [1m[35m (62.1ms)[0m  CREATE INDEX "index_automation_messages_on_workflow_type" ON "automation_messages" ("workflow_type")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_automation_messages_on_active_error" ON "automation_messages" ("active_error")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('18')
  [1m[36m (4.6ms)[0m  [1mcommit transaction[0m
Migrating to CreateContainers (19)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "containers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "barcode" varchar(255), "container_type_id" integer, "label" varchar(255), "sequence_no" varchar(255), "parent_container_id" integer DEFAULT 0 NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_containers_on_parent_container_id" ON "containers" ("parent_container_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_containers_on_container_type_id" ON "containers" ("container_type_id")[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "components_containers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "component_id" integer, "container_id" integer) 
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_components_containers_on_component_id" ON "components_containers" ("component_id")[0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_components_containers_on_container_id" ON "components_containers" ("container_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('19')[0m
  [1m[35m (6.6ms)[0m  commit transaction
Migrating to CreateAcademicStatuses (20)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "academic_statuses" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "customers_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX "index_academic_statuses_on_name" ON "academic_statuses" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20')
  [1m[36m (5.6ms)[0m  [1mcommit transaction[0m
Migrating to CreateIntendedUses (21)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.8ms)[0m  [1mCREATE TABLE "intended_uses" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "description" varchar(255), "deliverable_format" varchar(255), "deliverable_resolution" varchar(255), "deliverable_resolution_unit" varchar(255), "is_internal_use_only" boolean DEFAULT 'f' NOT NULL, "is_approved" boolean DEFAULT 'f' NOT NULL, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.6ms)[0m  CREATE UNIQUE INDEX "index_intended_uses_on_description" ON "intended_uses" ("description")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('21')[0m
  [1m[35m (7.6ms)[0m  commit transaction
Migrating to CreateIndexingScenarios (22)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "indexing_scenarios" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "pid" varchar(255), "datastream_name" varchar(255), "repository_url" varchar(255), "bibls_count" integer DEFAULT 0, "components_count" integer DEFAULT 0, "master_files_count" integer DEFAULT 0, "units_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('22')[0m
  [1m[35m (7.3ms)[0m  commit transaction
Migrating to CreateSqlReports (23)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "sql_reports" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "sql" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('23')[0m
  [1m[35m (5.6ms)[0m  commit transaction
Migrating to CreateImageTechMeta (24)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.1ms)[0m  CREATE TABLE "image_tech_meta" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "master_file_id" integer DEFAULT 0 NOT NULL, "image_format" varchar(255), "width" integer, "height" integer, "resolution" integer, "color_space" varchar(255), "depth" integer, "compression" varchar(255), "color_profile" varchar(255), "equipment" varchar(255), "software" varchar(255), "model" varchar(255), "exif_version" varchar(255), "capture_date" datetime, "iso" integer, "exposure_bias" varchar(255), "exposure_time" varchar(255), "aperture" varchar(255), "focal_length" decimal, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_image_tech_meta_on_master_file_id" ON "image_tech_meta" ("master_file_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('24')
  [1m[36m (5.5ms)[0m  [1mcommit transaction[0m
Migrating to CreateDeliveryMethods (25)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "delivery_methods" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "label" varchar(255), "description" varchar(255), "is_internal_use_only" boolean DEFAULT 'f' NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.5ms)[0m  CREATE UNIQUE INDEX "index_delivery_methods_on_label" ON "delivery_methods" ("label")
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "delivery_methods_orders" ("delivery_method_id" integer, "order_id" integer) [0m
  [1m[35m (0.2ms)[0m  CREATE INDEX "index_delivery_methods_orders_on_delivery_method_id" ON "delivery_methods_orders" ("delivery_method_id")
  [1m[36m (0.2ms)[0m  [1mCREATE INDEX "index_delivery_methods_orders_on_order_id" ON "delivery_methods_orders" ("order_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('25')
  [1m[36m (8.0ms)[0m  [1mcommit transaction[0m
Migrating to CreateDvdDeliveryLocations (26)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "dvd_delivery_locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "email_desc" text, "orders_count" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.5ms)[0m  CREATE UNIQUE INDEX "index_dvd_delivery_locations_on_name" ON "dvd_delivery_locations" ("name")
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('26')[0m
  [1m[35m (16.5ms)[0m  commit transaction
Migrating to CreateUnitImportSources (27)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.9ms)[0m  CREATE TABLE "unit_import_sources" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "unit_id" integer DEFAULT 0 NOT NULL, "standard" varchar(255), "version" varchar(255), "source" text(2147483647), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mCREATE INDEX "index_unit_import_sources_on_unit_id" ON "unit_import_sources" ("unit_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('27')
  [1m[36m (7.2ms)[0m  [1mcommit transaction[0m
Migrating to CreateComponentTypes (28)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "component_types" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.5ms)[0m  CREATE UNIQUE INDEX "index_component_types_on_name" ON "component_types" ("name")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('28')[0m
  [1m[35m (6.3ms)[0m  commit transaction
Migrating to CreateContainerTypes (29)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "container_types" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" varchar(255)) 
  [1m[36m (0.6ms)[0m  [1mCREATE UNIQUE INDEX "index_container_types_on_name" ON "container_types" ("name")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('29')
  [1m[36m (4.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.3ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
